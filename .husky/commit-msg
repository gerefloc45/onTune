#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Commitlint - Validazione messaggi di commit
echo "🔍 Validazione messaggio di commit..."
npx --no-install commitlint --edit "$1"

if [ $? -ne 0 ]; then
  echo "❌ Messaggio di commit non valido!"
  echo "📖 Consulta le linee guida per i commit: https://www.conventionalcommits.org/"
  echo "💡 Esempi di messaggi validi:"
  echo "   feat(music): aggiungi supporto per playlist Spotify"
  echo "   fix(queue): risolvi bug nella gestione della coda"
  echo "   docs(readme): aggiorna istruzioni di installazione"
  echo "   test(bot): aggiungi test per comandi slash"
  echo "   refactor(api): migliora struttura endpoint"
  echo "   perf(cache): ottimizza sistema di caching"
  echo "   style(ui): correggi formattazione dashboard"
  echo "   chore(deps): aggiorna dipendenze"
  exit 1
fi

echo "✅ Messaggio di commit valido!"